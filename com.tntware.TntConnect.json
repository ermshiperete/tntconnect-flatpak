{
  "app-id": "com.tntware.TntConnect",
  "branch": "master",
  "runtime": "org.freedesktop.Platform/i386",
  "sdk": "org.freedesktop.Sdk/i386",
  "runtime-version": "1.6",
  "base": "com.ermshiperete.wine.BaseApp",
  "base-version": "develop",
  "tags": [
    "proprietary"
  ],
  "command": "tntconnect.sh",
  "build-options": {
    "cflags": "-O1 -pipe",
    "env": {
      "V": "0"
    }
  },
  "finish-args": [
    "--socket=x11",
    "--share=network",
    "--share=ipc",
    "--device=dri",
    "--allow=multiarch",
    "--socket=pulseaudio",
    "--filesystem=/var/log:ro",
    "--filesystem=xdg-documents",
    "--filesystem=host",
    "--filesystem=home",
    "--filesystem=/tmp",
    "--env=WINEDEBUG=-all",
    "--socket=system-bus",
    "--socket=session-bus",
    "--talk-name=org.freedesktop.secrets",
    "--talk-name=org.freedesktop.portal.Documents",
    "--system-talk-name=org.freedesktop.secrets",
    "--system-talk-name=org.freedesktop.portal.Documents",
    "--talk-name=org.freedesktop.portal.desktop",
    "--system-talk-name=org.freedesktop.portal.desktop",
    "--device=all",
    "--filesystem=xdg-run/dconf",
    "--filesystem=~/.config/dconf:ro",
    "--talk-name=ca.desrt.dconf",
    "--env=DCONF_USER_CONFIG_DIR=.config/dconf"
  ],
  "modules": [
    {
      "name": "metadata",
      "buildsystem": "simple",
      "build-commands": [
        "install -Dm644 com.tntware.TntConnect.256x256.png /app/share/icons/hicolor/256x256/apps/com.tntware.TntConnect.png",
        "install -Dm644 com.tntware.TntConnect.128x128.png /app/share/icons/hicolor/128x128/apps/com.tntware.TntConnect.png",
        "install -Dm644 com.tntware.TntConnect.64x64.png /app/share/icons/hicolor/64x64/apps/com.tntware.TntConnect.png",
        "install -Dm644 com.tntware.TntConnect.48x48.png /app/share/icons/hicolor/48x48/apps/com.tntware.TntConnect.png",
        "install -Dm644 com.tntware.TntConnect.32x32.png /app/share/icons/hicolor/32x32/apps/com.tntware.TntConnect.png",
        "install -Dm644 com.tntware.TntConnect.16x16.png /app/share/icons/hicolor/16x16/apps/com.tntware.TntConnect.png",
        "install -D --mode=644 com.tntware.TntConnect.desktop /app/share/applications/com.tntware.TntConnect.desktop",
        "install -D --mode=644 com.tntware.TntConnect.appdata.xml /app/share/metainfo/com.tntware.TntConnect.appdata.xml"
      ],
      "no-make-install": true,
      "sources": [
        {
          "type": "file",
          "path": "icons/com.tntware.TntConnect.256x256.png"
        },
        {
          "type": "file",
          "path": "icons/com.tntware.TntConnect.128x128.png"
        },
        {
          "type": "file",
          "path": "icons/com.tntware.TntConnect.64x64.png"
        },
        {
          "type": "file",
          "path": "icons/com.tntware.TntConnect.48x48.png"
        },
        {
          "type": "file",
          "path": "icons/com.tntware.TntConnect.32x32.png"
        },
        {
          "type": "file",
          "path": "icons/com.tntware.TntConnect.16x16.png"
        },
        {
          "type": "file",
          "path": "com.tntware.TntConnect.desktop"
        },
        {
          "type": "file",
          "path": "com.tntware.TntConnect.appdata.xml"
        }
      ]
    },
    {
      "name": "tntconnect",
      "buildsystem": "simple",
      "build-commands": [
        "install -d /app/bin",
        "install tntconnect.sh /app/bin",
        "install -d /app/extra",
        "install TntConnect.tar.gz /app/extra",
        "cd /app/extra",
        "tar xfz TntConnect.tar.gz",
        "rm TntConnect.tar.gz",
        "cp -a wineprefix /app/extra",
        "rm -rf /app/extra/wineprefix/dosdevices/c",
        "ln -sf ../drive_c /app/extra/wineprefix/dosdevices/c:",
        "ln -sf / /app/extra/wineprefix/dosdevices/z:"
      ],
      "cleanup":[
        "/app/extra/TntConnect.tar.gz"
      ],
      "sources": [
        {
          "type": "file",
          "path": "TntConnect.tar.gz"
        },
        {
          "type": "file",
          "path": "tntconnect.sh"
        }
      ]
    }
  ]
}
